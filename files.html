<html>
    <head>
        <link rel="stylesheet" type="text/css" href="assets/css/css/file-types.css">
        <link rel="stylesheet" type="text/css" href="assets/css/css/files.css">
    </head>
    <body>
        <div id="file-manager" class="file-manager">
            <ul id="files" class="file-manager">
            </ul>
        </div>
        <script>
            var files = document.getElementById('files');
            fetch('./mock_files.json')
            .then(response => response.json())
            .then(data => render(data, files))
            .catch(err => console.error(err));

            function render(data,parent){
                data.files.forEach(item => {
                    let il = document.createElement('li');
                    let text = document.createTextNode(item.name);
                    il.setAttribute("class", `pft-directory dirOpen ${item.type} ${parent.id}`);
                    il.setAttribute("id", item.name);
                    il.setAttribute("style", "position: relative; left:-22px")
                    il.appendChild(text)
                    parent.appendChild(il)
                    if(item.type == "folder"){
                        nested = document.createElement('ul')
                        nested.setAttribute("class", "file-manager");
                        parent.appendChild(nested)
                        render(item, nested);
                    } 
                });
            }
        </script>
    </body>
</html>